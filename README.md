# Паттерн «Шаблонный метод» (Template Method, GoF)

**Идея**: Абстрактный базовый класс задаёт «каркас» алгоритма (шаблон), реализуя шаги, общие для всех вариантов. Конкретные подклассы переопределяют только отдельные шаги‑хуки, не меняя структуру всего алгоритма.

### Участники
* **Абстрактный класс** (AbstractClass) — реализует «шаблонный» метод + дефолтные версии хуков.
* **Конкретные классы** — переопределяют необходимые хуки.

### Когда применять
* Нужно гарантировать *фиксированный порядок* шагов.
* Большую часть алгоритма можно обобщить и вынести в один класс.
* Частые изменения касаются только отдельных этапов (расширяемость).

### Плюсы
* Единая точка изменения общего кода.
* Подклассы фокусируются только на вариативной части.

### Минусы
*  Жёсткая связь с базовым классом (инверсии зависимостей нет).
*  Количество подклассов растёт, если вариаций много.

---
## 2. Пример проекта

В этом репозитории «скелет» — это **ETL-конвейер** (`DataPipeline`):

| Шаг | Описание | Переопределяется |
|-----|----------|------------------|
| `read()` | Получение «сырых» данных | опционально |
| `parse()` | Преобразование сырого текста → записи | **обязательно** |
| `transform()` | Доп. обработка (фильтр/агрегация) | опционально |
| `write()` | Финальный вывод/сериализация | **обязательно** |

Две реализации:  
1. **CsvToJsonPipeline** — CSV → JSON.  
2. **JsonStatsPipeline** — JSON-массив чисел → словарь статистики.

Функция `_read_file()` вынесена отдельно: в тестах мы подменяем её моком, чтобы не обращаться к реальной файловой системе.

---
## 3. Быстрый старт

### 3.1 Запуск демонстрации

```bash
pytest tests_pattern.py